<div class="body">

    <!--============================== transaction spinner ===================-->
    <div *ngIf="spinner">
        <app-common-loader-spinner></app-common-loader-spinner>
    </div>
    <!--============================== // transaction spinner ===================-->

    <form [formGroup]="formGroup" name="formGroup">
        <mat-card>
            <div>
                <div class="sub-heading">
                    <span *ngIf="isParipatra2016" class="inline-block align-middle m-1">
                        {{ "Lessons_learnt_from" | translate }}
                    </span>
                    <span *ngIf="!isParipatra2016" class="inline-block align-middle m-1">
                        {{ "Lessons_learnt_from_22" | translate }}
                    </span>
                </div>

                <mat-card>
                    <div>
                        <div class="sub-heading">
                            <p>
                                <span *ngIf="isParipatra2016">{{ "Indicate_issues_make_project" | translate }}</span>
                                <span *ngIf="!isParipatra2016">{{ "Indicate_issues_make_project_22" | translate }}</span>

                                <span *ngIf="!editor1" (click)="toggleShow1()">
                            <mat-icon style="color: white;cursor: pointer;float:right" matTooltip="ClickToExpand"
                                      matTooltipPosition="above">expand_more</mat-icon>
                        </span>
                                <span *ngIf="editor1" (click)="toggleShow1()">
                            <mat-icon style="color: white;cursor: pointer;float:right" matTooltip="ClickToCollapse"
                                      matTooltipPosition="above">expand_less</mat-icon>
                        </span>
                                <span style="float: right">
                                    <label for="file-upload3">
                                        <mat-icon matTooltip="{{'Upload_Image' | translate}}"
                                                  matTooltipPosition="above">image</mat-icon>
                                    </label>
                                    <input #file3 type="file" accept='image/*'
                                           (change)="uploadImageAsBase64(file3.files,'indicateIssuesMakeProject')"
                                           id="file-upload3"/>
                             </span>
                            </p>
                        </div>
                        <div *ngIf="editor1" style="position: relative;">
                            <ckeditor  [config]="mediumEditorConfig" formControlName="indicateIssuesMakeProject"></ckeditor>
                        </div>
                    </div>
                    <br>

                    <div>
                        <div class="sub-heading">
                            <p>
                                <span *ngIf="isParipatra2016">{{ "Indicate_issues_not_work" | translate }}</span>
                                <span *ngIf="!isParipatra2016">{{ "Indicate_issues_not_work_22" | translate }}</span>

                                <span *ngIf="!editor2" (click)="toggleShow2()">
                            <mat-icon style="color: white;cursor: pointer;float:right" matTooltip="ClickToExpand"
                                      matTooltipPosition="above">expand_more</mat-icon>
                        </span>
                                <span *ngIf="editor2" (click)="toggleShow2()">
                            <mat-icon style="color: white;cursor: pointer;float:right" matTooltip="ClickToCollapse"
                                      matTooltipPosition="above">expand_less</mat-icon>
                        </span>
                                <span style="float: right">
                                    <label for="file-upload4">
                                        <mat-icon matTooltip="{{'Upload_Image' | translate}}"
                                                  matTooltipPosition="above">image</mat-icon>
                                    </label>
                                    <input #file4 type="file" accept='image/*'
                                           (change)="uploadImageAsBase64(file4.files,'indicateIssuesNotWork')"
                                           id="file-upload4"/>
                             </span>
                            </p>
                        </div>
                        <div *ngIf="editor2" style="position: relative;">
                            <ckeditor  [config]="mediumEditorConfig" formControlName="indicateIssuesNotWork"></ckeditor>
                        </div>
                    </div>
                    <br>
                </mat-card>

                <div>

                    <div class="sub-heading mt-5" *ngIf="isParipatra2016">
                        <span [innerHTML]="'Indicate_basic_item_wise' | translate"></span>
                    </div>
                    <div class="sub-heading mt-5" *ngIf="!isParipatra2016">
                        <span [innerHTML]="'Indicate_basic_item_wise_22' | translate"></span>
                    </div>

                    <mat-card>
                        <div style="overflow: auto; height: 300px !important;" *ngIf="incicateBasisItem">
                            <table id="indicateTbl" class="table_overflow">
                                <thead>
                                <tr>
                                    <th><span [innerHTML]="'Sl_no' | translate"></span></th>
                                    <th><span [innerHTML]="'Major_items' | translate"></span></th>
                                    <th><span [innerHTML]="'Description' | translate"></span></th>
                                    <th><span [innerHTML]="'Unit' | translate"></span></th>
                                    <th><span [innerHTML]="'Unit_cost' | translate"></span></th>
                                    <th><span [innerHTML]="'Basis' | translate"></span></th>
                                    <th><span [innerHTML]="'Source' | translate"></span></th>
                                    <th><span [innerHTML]="'Date' | translate"></span></th>
                                </tr>
                                <tr>
                                    <th>{{'Num1' | translate}}</th>
                                    <th>{{'Num2' | translate}}</th>
                                    <th>{{'Num3' | translate}}</th>
                                    <th>{{'Num4' | translate}}</th>
                                    <th>{{'Num5' | translate}}</th>
                                    <th>{{'Num6' | translate}}</th>
                                    <th>{{'Num7' | translate}}</th>
                                    <th>{{'Num8' | translate}}</th>
                                </tr>
                                </thead>

                                <tbody style="height: 10% !important;">
                                <ng-container formArrayName="itemWiseCostEstimatedList">
                                    <ng-container
                                        *ngFor="let lessonForm of itemWiseCostEstimatedList.controls; let i = index">

                                        <tr class="lesson-form-row" [formGroup]="lessonForm">
                                            <!-- TODO: Those value dynamically come from server-->
                                            <td style="text-align: center">{{i + 1}}</td>

                                            <td>
                                                <mat-form-field class="w-full p-1">
                                                    <input formControlName="majorItem" appearance="outline"
                                                           autocomplete="off" matInput required readonly>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field
                                                    appearance="outline"
                                                    autocomplete="off"
                                                    class="w-full p-1 mt-3">
                                                    <textarea formControlName="description" matInput readonly
                                                              type="text"></textarea>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field class="w-full p-1">
                                                    <input style="text-align: center" formControlName="unitTypeName"
                                                           appearance="outline"
                                                           autocomplete="off" matInput required readonly>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field class="w-full p-1">
                                                    <input style="text-align: right" formControlName="unitCost"
                                                           appearance="outline"
                                                           autocomplete="off" matInput required readonly>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field
                                                    class="w-full p-1 mt-3"
                                                    autocomplete="off"
                                                    appearance="outline">
                                                    <textarea matInput type="text" formControlName="basis"></textarea>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field
                                                    class="w-full p-1 mt-3"
                                                    autocomplete="off"
                                                    appearance="outline">
                                                    <textarea matInput type="text" formControlName="source"></textarea>
                                                </mat-form-field>
                                            </td>
                                            <td style="padding-left: 5px; padding-right: 5px;">
                                                <mat-form-field class="w-full p-1">
                                                    <input (click)="picker2.open()" [matDatepicker]="picker2"
                                                           formControlName="itemWiseCostDate"
                                                           matInput readonly required>
                                                    <mat-datepicker-toggle [for]="picker2"
                                                                           matSuffix></mat-datepicker-toggle>
                                                    <mat-datepicker #picker2></mat-datepicker>
                                                </mat-form-field>
                                                <!--                                    <input class="input-class"-->
                                                <!--                                              autocomplete="off" type="date"-->
                                                <!--                                           formControlName="itemWiseCostDate" value=""/>-->
                                            </td>
                                        </tr>
                                    </ng-container>
                                </ng-container>

                                </tbody>
                            </table>
                        </div>
                        <div *ngIf="!incicateBasisItem">
                            <p style="font-size: 18px;"><b>Major Item Not Found!</b></p>
                        </div>
                    </mat-card>
                </div>
                <br>

                <div>
                    <div class="sub-heading" *ngIf="isParipatra2016">
                        <span [innerHTML]="'Give_comparative_cost' | translate"></span>
                    </div>
                    <div class="sub-heading" *ngIf="!isParipatra2016">
                        <span [innerHTML]="'Give_comparative_cost_22' | translate"></span>
                    </div>
                    <mat-card>
                        <div style="overflow: auto; height: 350px !important;" *ngIf="giveComparativeCost">
                            <table id="comparativeTbl" class="table_overflow_y">

                                <thead>
                                <tr>
                                    <th rowspan="2"><span [innerHTML]="'Sl_no' | translate"></span></th>
                                    <th rowspan="2"><span [innerHTML]="'Major_items' | translate"></span></th>
                                    <th rowspan="2"><span [innerHTML]="'Description' | translate"></span></th>
                                    <th rowspan="2"><span [innerHTML]="'Unit' | translate"></span></th>
                                    <th colspan="3"><span [innerHTML]="'Unit_cost_item' | translate"></span></th>
                                    <th rowspan="2"><span [innerHTML]="'Remark' | translate"></span></th>
                                </tr>
                                <tr>
                                    <th><span [innerHTML]="'Proposed_project' | translate"></span></th>
                                    <th><span [innerHTML]="'Similar_going_project' | translate"></span></th>
                                    <th><span [innerHTML]="'Similar_complete_project' | translate"></span></th>
                                </tr>
                                <tr>
                                    <th>{{'Num1' | translate}}</th>
                                    <th>{{'Num2' | translate}}</th>
                                    <th>{{'Num3' | translate}}</th>
                                    <th>{{'Num4' | translate}}</th>
                                    <th>{{'Num5' | translate}}</th>
                                    <th>{{'Num6' | translate}}</th>
                                    <th>{{'Num7' | translate}}</th>
                                    <th>{{'Num8' | translate}}</th>
                                </tr>
                                </thead>


                                <tbody>
                                <ng-container formArrayName="costOfMajorItemList">
                                    <ng-container
                                        *ngFor="let lessonForm of costOfMajorItemList.controls; let i = index">

                                        <tr class="lesson-form-row" [formGroup]="lessonForm">
                                            <!-- TODO: Those value dynamically come from server-->
                                            <td style="text-align: center">{{i + 1}}</td>

                                            <td>
                                                <mat-form-field class="w-full p-1">
                                                    <input formControlName="majorItem" appearance="outline"
                                                           autocomplete="off" matInput required readonly>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field
                                                    appearance="outline"
                                                    autocomplete="off"
                                                    class="w-full p-1 mt-3">
                                                    <textarea formControlName="description" matInput readonly
                                                              type="text"></textarea>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field class="w-full p-1">
                                                    <input style="text-align: center" formControlName="unitTypeName"
                                                           appearance="outline"
                                                           autocomplete="off" matInput required readonly>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field class="w-full p-1">
                                                    <input style="text-align: right;" formControlName="proposalProject"
                                                           appearance="outline"
                                                           autocomplete="off" matInput required readonly>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field
                                                    class="w-full p-1 mt-3"
                                                    autocomplete="off"
                                                    appearance="outline"
                                                >
                                <textarea matInput type="text" formControlName="similarGoingProject">
                                </textarea>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field
                                                    class="w-full p-1 mt-3"
                                                    autocomplete="off"
                                                    appearance="outline"
                                                >
                                <textarea matInput type="text" formControlName="similarCompleteProject">
                                </textarea>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field
                                                    class="w-full p-1 mt-3"
                                                    autocomplete="off"
                                                    appearance="outline"
                                                >
                                <textarea matInput type="text" formControlName="remarks">
                                </textarea>
                                                </mat-form-field>
                                            </td>
                                        </tr>
                                    </ng-container>
                                </ng-container>

                                </tbody>
                            </table>
                        </div>
                        <div *ngIf="!giveComparativeCost">
                            <p style="font-size: 18px;"><b>Major Item Not Found!</b></p>
                        </div>
                    </mat-card>
                </div>
                <br>
                <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                    <mat-label class="pb-5" fxFlex="28%" fxFlex.md="30%" fxFlex.sm="30%"
                               fxFlex.xs="100%">{{'similar_ongoing' | translate}}:
                    </mat-label>
                    <mat-form-field fxFlex="72%" fxFlex.md="70%" fxFlex.sm="70%" fxFlex.xs="100%">
                        <textarea formControlName="similarOngoingProjectsName" matInput placeholder="Enter Text"
                                  required></textarea>
                    </mat-form-field>
                </div>
                <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                    <mat-label class="pb-5" fxFlex="28%" fxFlex.md="30%" fxFlex.sm="30%"
                               fxFlex.xs="100%">{{'similar_completed' | translate}}:
                    </mat-label>
                    <mat-form-field fxFlex="72%" fxFlex.md="70%" fxFlex.sm="70%" fxFlex.xs="100%">
                        <textarea formControlName="similarCompletedProjectsName" matInput placeholder="Enter Text"
                                  required></textarea>
                    </mat-form-field>
                </div>
                <!--        <p style="padding-left: 10px">{{'similar_ongoing' | translate}}</p>-->
                <!--        <p style="padding-left: 10px">{{'similar_completed' | translate}}</p>-->
                <br>
            </div>
        </mat-card>
    </form>

    <div class="flex justify-end mt-8">
        <button
            class="px-8 mr-2"
            mat-flat-button
            [color]="'accent'"
            type="button"
            matStepperPrevious>
            {{'back' | translate}}
        </button>
        <button
            [disabled]="buttonDisable || spinner"
            class="px-8 mr-2"
            mat-flat-button
            [color]="'primary'"
            type="button"
            (click)="onSubmit()">
            {{'save' | translate}}
        </button>
        <button
            [disabled]="buttonDisable || spinner"
            class="px-8 mr-2"
            mat-flat-button
            [color]="'primary'"
            type="button"
            matStepperNext
            (click)="onSubmit()">
            {{'saveNext' | translate}}
        </button>
        <button
            [disabled]="buttonDisable || spinner"
            class="px-8 mr-2"
            mat-flat-button
            style="background-color: green; color: #FFFFFF"
            (click)="onSubmitAndExit()"
            type="button">
            {{'saveExit' | translate}}
        </button>
        <button
            class="px-8 mr-2 toggle-sidebar-folded"
            :matTooltip="{{ 'Next' | translate }}"
            mat-flat-button
            style="background-color: green; color: #FFFFFF"
            matStepperNext
            type="button">
            {{ "Next" | translate }}
        </button>

    </div>
</div>
