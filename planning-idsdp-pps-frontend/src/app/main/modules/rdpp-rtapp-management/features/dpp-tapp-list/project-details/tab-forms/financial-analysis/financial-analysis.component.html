<div class="body">
    <form [formGroup]="formGroup" name="formGroup">
    <mat-card>
        <div>
            <div class="sub-heading">
                        <p>
                            {{ 'FA_16.0' | translate }}

                <span *ngIf="!editor1" (click)="toggleShow1()">
                            <mat-icon style="color: white;cursor: pointer;float:right" matTooltip="ClickToExpand" matTooltipPosition="above">expand_more</mat-icon>
                        </span>
                <span *ngIf="editor1" (click)="toggleShow1()">
                            <mat-icon style="color: white;cursor: pointer;float:right" matTooltip="ClickToCollaplse" matTooltipPosition="above">expand_less</mat-icon>
                        </span>
                        </p>

            </div>
            <div *ngIf="editor1" style="position: relative;">

                <div class="custom-file-upload-div">
                    <label for="file-upload0" class="custom-file-upload">
                    <mat-icon class="custom-image-icon">image</mat-icon>
                    </label>
                     <input #file0 type="file" accept='image/*'
                        (change)="uploadImageAsBase64(file0.files,'weatherAppraisalStudy')"  id="file-upload0" />
                </div>

            <ckeditor  formControlName="weatherAppraisalStudy">

            </ckeditor>
            </div>
        </div>
    </mat-card>
    <br>
    <mat-card>
        <div>
            <p class="head pd">{{'Attach_summary_of_finding' | translate}}</p>
        </div>

        <div fxFlex="30%" fxFlex.xs="100%" fxFlex.sm="100%" class="fileInput pd" style="margin-left: 30px;">
            <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                <mat-form-field fxFlex="90%" fxFlex.xs="100%" fxFlex.sm="70%">
                    <ngx-mat-file-input (change)="uploadFile($event.target.files, 'attachSummaryFinding')" [accept]="'.pdf'" formControlName="attachSummaryFinding"
                        placeholder="Basic outline placeholder"></ngx-mat-file-input>
                    <mat-icon matSuffix>folder</mat-icon>
                </mat-form-field>
                <button *ngIf="summaryFindingAttachmentId" fxFlex="2%" fxFlex.md="2%" fxFlex.sm="2%" fxFlex.xs="2%">
                    <mat-icon matTooltip="{{'down' | translate}}" (click)="summaryFindingAttachmentDownload()" color="primary">file_download</mat-icon>
                </button>
<!--                <button *ngIf="summaryFindingAttachmentId"  fxFlex="4%" fxFlex.md="4%" fxFlex.sm="4%"-->
<!--                         fxFlex.xs="4%">-->
<!--                    <mat-icon class="pb-2 ml-2 warn">delete</mat-icon>-->
<!--                </button>-->
            </div>
        </div>
    </mat-card>
    <br>
    <mat-card>
        {{'FA_17.0' | translate}}

        <button (click)="openModal(template)" mat-raised-button color="primary"
            style="margin-left: 10px;">{{'Button_financial_analysis' | translate}}</button>
        <button (click)="openModal(template)" mat-raised-button color="primary"
            style="margin-left: 10px;">{{'Button_economi_analysis' | translate}}</button>

    </mat-card>

    <!-- financial analysis table -->
    <br>


        <div style="overflow-x:auto;">

        <table class="mat-elevation-z8">
            <thead>
                <tr class="heading" style="text-align: center;">
                    <th class="top-header">{{'TH_analysis' | translate}}</th>
                    <th class="top-header">{{'TH_NPV' | translate}}</th>
                    <th class="top-header">{{'TH_BCR' | translate}}</th>
                    <th class="top-header">{{'TH_IRR' | translate}}</th>
                    <th class="top-header">{{'ThAttachment' | translate}}</th>
                    <th class="top-header">{{'down' | translate}}</th>

                </tr>

            </thead>

            <!-- Table Body-->
            <tbody>
                <tr class="heightRow">
                    <!-- TODO: Those value dynamically come from server-->


                    <td>
                        {{'TR_Financial_Analysis' | translate}}
                    </td>
                    <td>
                        <mat-form-field class="w-full">
                            <input TwoDigitDecimalNumber appearance="outline" autocomplete="off" matInput  formControlName="financialNpv">
                        </mat-form-field>
                    </td>


                    <td>
                        <mat-form-field class="w-full">
                            <input TwoDigitDecimalNumber appearance="outline" autocomplete="off" matInput  formControlName="financialBcr">
                        </mat-form-field>
                    </td>

                    <td>
                        <mat-form-field class="w-full">
                            <input TwoDigitDecimalNumber appearance="outline" autocomplete="off" matInput  formControlName="fiancialIrr">
                        </mat-form-field>
                    </td>
                    <td>

                            <mat-form-field class="fuse-mat-dense flex-auto w-full">
                                <ngx-mat-file-input (change)="uploadFile($event.target.files, 'financialAttachment')"  [accept]="'.pdf'" formControlName="financialAttachment"
                                                    placeholder="Basic outline placeholder"></ngx-mat-file-input>
                                <mat-icon matSuffix>folder</mat-icon>
                            </mat-form-field>
                    </td>
                    <td *ngIf="financialAttachmentId">
                        <div class="buttons">
                            <button   *ngIf="financialAttachmentId" class="toggle-sidebar-folded"
                                      mat-icon-button
                                      fxHide.lt-lg>
                                <mat-icon matTooltip="{{'down' | translate}}" (click)="financialAttachmentDownload()" color="primary">file_download</mat-icon>
                            </button>

                        </div>
                    </td>
                </tr>
                <tr class="heightRow">
                    <!-- TODO: Those value dynamically come from server-->


                    <td>
                        {{'TR_Economic_Analysis' | translate}}
                    </td>
                    <td>
                        <mat-form-field class="w-full">
                            <input TwoDigitDecimalNumber appearance="outline" autocomplete="off" matInput  formControlName="economicNpv">
                        </mat-form-field>
                    </td>


                    <td>
                        <mat-form-field class="w-full">
                            <input TwoDigitDecimalNumber appearance="outline" autocomplete="off" matInput  formControlName="economicBcr">
                        </mat-form-field>
                    </td>

                    <td>
                        <mat-form-field class="w-full">
                            <input TwoDigitDecimalNumber appearance="outline" autocomplete="off" matInput  formControlName="economicIrr">
                        </mat-form-field>
                    </td>
                    <td>

                            <mat-form-field class="fuse-mat-dense flex-auto w-full">
                                <ngx-mat-file-input (change)="uploadFile($event.target.files, 'economicAttachment')" [accept]="'.pdf'" formControlName="economicAttachment"
                                                    placeholder="Basic outline placeholder"></ngx-mat-file-input>
                                <mat-icon matSuffix>folder</mat-icon>
                            </mat-form-field>



                    </td>
                    <td  *ngIf="economicAttachmentId">

                        <div class="buttons">
                            <button   *ngIf="economicAttachmentId" class="toggle-sidebar-folded"
                                    mat-icon-button
                                    fxHide.lt-lg>
                                <mat-icon matTooltip="{{'down' | translate}}" (click)="economicAttachmentDownload()" color="primary">file_download</mat-icon>
                            </button>

                        </div>
                    </td>
                </tr>
            </tbody>

            <!-- Table Body End-->
        </table>

        </div>

    <div class="flex justify-end mt-8">
        <button
            class="px-8 mr-2"
            mat-flat-button
            [color]="'accent'"
            type="button"
            matStepperPrevious>
            {{'back' | translate}}
        </button>
        <button
            [disabled]="buttonDisable"
            class="px-8 mr-2"
            mat-flat-button
            [color]="'primary'"
            type="button"
            (click)="onSubmit()"
            matStepperNext>
            {{'saveNext' | translate}}
        </button>
        <button
            [disabled]="buttonDisable"
            class="px-8 mr-2"
            mat-flat-button
            style="background-color: green; color: #FFFFFF"
            (click)="onSubmitAndExit()"
            type="button">
            {{'saveExit' | translate}}
        </button>
        <button
            class="px-8 mr-2 toggle-sidebar-folded"
            :matTooltip="{{ 'Next' | translate }}"
            mat-flat-button
            style="background-color: green; color: #FFFFFF"
            matStepperNext
            type="button">
            {{ "Next" | translate }}
        </button>

    </div>



    <ng-template #template>
        <div class="modalBody">
            <br>
            <div>
                <table>
                    <tr>
                        <td style="border:none">Project Life Time:</td>
                        <td style="border:none">
                            <mat-form-field class="w-full">
                                <input appearance="outline" autocomplete="off" matInput required>
                            </mat-form-field>
                        </td>
                        <td style="border:none">Discounting Factor:</td>
                        <td style="border:none">
                            <mat-form-field class="w-full">
                                <input appearance="outline" autocomplete="off" matInput required>
                            </mat-form-field>
                        </td>
                    </tr>
                </table>
            </div>
            <div style="border-bottom: 1px solid #cfcece;">
                <div class="backgrounds">
                    <table class="table-color">
                        <tr>
                            <td style="border:none">NPV</td>
                            <td style="border:none">
                                <mat-form-field class="readOnly mt-5">
                                    <input matInput readonly>
                                </mat-form-field>
                            </td>
                            <td style="border:none">BCR</td>
                            <td style="border:none">
                                <mat-form-field class="readOnly mt-5">
                                    <input matInput  readonly>
                                </mat-form-field>
                            </td>
                            <td style="border:none">IRR</td>
                            <td style="border:none">
                                <mat-form-field class="readOnly mt-5" >
                                    <input matInput readonly >
                                </mat-form-field>
                            </td>
                            <td style="border:none">
                                <button mat-raised-button color="primary">Calculate</button>
                            </td>
                        </tr>
                    </table>
                </div>

            </div>
            <div style="text-align: right; padding-right: 20px; padding-top: 10px;">
                <button mat-raised-button color="warn" (click)="closeModal(template)">Cancel</button>
            </div>
        </div>
        <br>
    </ng-template>
</form>

</div>
