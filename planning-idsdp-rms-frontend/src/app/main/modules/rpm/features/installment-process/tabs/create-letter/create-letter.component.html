<div class="width-100">
    <div *ngIf="spinner" class="flex items-center justify-center">
        <div style="border-top-color:transparent; position: absolute;z-index: 9999;"
            class="absolute top-1/2 left-1/2 w-16 h-16 border-4 border-blue-400 border-dashed rounded-full animate-spin">
        </div>
    </div>
    <div class="flex-auto m-7 body-color">
        <form>
            <!-- CARD ONE-->
            <div>
                <div class="heading mt-2">
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-80 lg:w-80 ml-2 md:text-left pr-2 md:pt-3">
                            {{'tab_1_title' | translate}}
                        </div>
                    </div>
                </div>
                <mat-card class="tab-color">
                    <!-- Row 1-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'researcher_title' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-80 lg:w-80">
                            <mat-form-field class="w-full">
                                <input matInput [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="installmentProcessModel.researchtitle" readonly>
                                <!--                            <mat-error>required!</mat-error>-->
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Row 1 end -->
                    <!-- Row 2-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'installment_type' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <mat-select name="installments" multiple placeholder="Select One"
                                    [disabled]="isDisabled" [(ngModel)]="installmentProcessModel.installmentTypesData"
                                    (selectionChange)="changeIstallmentType($event)"
                                    [ngModelOptions]="{standalone: true}">
                                    <div *ngIf="!mode">
                                        <mat-option *ngFor="let f of proposal?.installmentsType" [value]="f.id">
                                            {{f.installmentType}}
                                        </mat-option>
                                    </div>
                                    <div *ngIf="mode">
                                        <mat-option *ngFor="let f of proposal?.installmentsTypeAll" [value]="f.id">
                                            {{f.installmentType}}
                                        </mat-option>
                                    </div>
                                </mat-select>
                                <mat-error>Fiscal year is required!</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-100 lg:w-100 ml-2 md:text-left pr-2 md:mb-2">
                            <ng-container *ngFor="let in of installmentPlaceholder">
                                <span style="color: #DC7633">{{in.installment}} , Percentage : {{in.percentage}} ,
                                    Amount: {{in.amount}} </span>
                                <br />
                            </ng-container>
                        </div>
                    </div>
                    <!-- Row 2 end -->
                    <!-- Row 3-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'parcentage_amount' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input matInput readonly [(ngModel)]="installmentProcessModel.percentageAmount"
                                    [ngModelOptions]="{standalone: true}">
                                <mat-error>required!</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'amount_tk' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input matInput readonly [(ngModel)]="installmentProcessModel.tkAmount"
                                    [ngModelOptions]="{standalone: true}">
                                <mat-error>required!</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Row 3 end -->
                    <!-- Row 4-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'installment_date' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full" class="example-form-field" style="width: 99%;">
                                <input matInput [matDatepicker]="datepicker" name="dateOfBirth"
                                    [(ngModel)]="installmentProcessModel.installmentDate" required>
                                <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
                                <mat-datepicker #datepicker>
                                </mat-datepicker>
                                <mat-error>Date of birth is required.</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Row 4 end -->
                    <!-- Row 5-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'subject' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-80 lg:w-80">
                            <mat-form-field class="w-full">
                                <input matInput [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="installmentProcessModel.subject">
                                <!--                            <mat-error>required!</mat-error>-->
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Row 5 end -->
                    <!-- Row 6-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'template_type' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <mat-select placeholder="Select One" (selectionChange)="changeTemplateType($event)">
                                    <mat-option *ngFor="let f of templateType" [value]="f.id">{{f.templateType}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>Fiscal year is required!</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Row 6 end -->
                    <!-- Row 7-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'predefined_template' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-80 lg:w-80">
                            <mat-form-field class="w-full">
                                <mat-select placeholder="Select One"
                                    (selectionChange)="changePredefinedTemplateType($event)">
                                    <mat-option *ngFor="let f of predefinedTemplates" [value]="f.id">{{f.subject}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>Fiscal year is required!</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Row 7 end -->
                    <!-- Row 8-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'mail_body' | translate}}
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-80 lg:w-80">
                            <ckeditor [ngModelOptions]="{standalone: true}"
                                [(ngModel)]="installmentProcessModel.mailBody" [config]="mediumEditorConfig"></ckeditor>
                        </div>
                    </div>
                    <ng-container *ngIf="loginUserInfo.userType=='Rms_DO'">
                        <div class="md:flex">
                            <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 mt-3 md:text-left pr-2 md:pt-3">
                                <span class="text-gray-700">
                                    {{'installmentStatus' | translate}}<strong class="required">*</strong>
                                </span>
                            </div>
                            <div class="w-full sm:w-auto md:w-30 lg:w-30 mt-3">
                                <mat-form-field class="w-full">
                                    <mat-select disabled [ngModelOptions]="{standalone: true}"
                                        [(ngModel)]="installmentProcessModel.installmentStatus">
                                        <mat-option value="Pending">Pending</mat-option>
                                        <mat-option value="Processing">Processing</mat-option>
                                        <mat-option value="Rework">Rework</mat-option>
                                        <mat-option value="Rejected">Rejected</mat-option>
                                        <mat-option value="Completed">Completed</mat-option>
                                    </mat-select>
                                    <mat-error>Fiscal year is required!</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </ng-container>
                    <!-- Row 8-->
                    <div class="flex justify-end mt-8">
                        <button *ngIf="mode" mat-flat-button style="background-color: green; color: #FFFFFF"
                            type="submit" (click)="back()" color="primary"
                            class="px-3 mr-2 toggle-sidebar-folded previousBtn">
                            <mat-icon *ngIf="previousIcon" class="mr-1">{{previousIcon}}</mat-icon>
                            <span>{{ "back" | translate }}</span>
                        </button>
                        <button [disabled]="disableSaveBtn" mat-flat-button
                            style="background-color: green; color: #FFFFFF" type="submit" (click)="save()"
                            color="primary" class="px-3 mr-2 toggle-sidebar-folded saveBtn">
                            <mat-icon *ngIf="saveIcon" class="mr-1">{{saveIcon}}</mat-icon>
                            <span>{{ "save" | translate }}</span>
                        </button>
                        <button [disabled]="disableSaveBtn" mat-flat-button (click)="saveAndNext()" type="button"
                            color="primary" class="px-3 mr-2 toggle-sidebar-folded saveAndNextBtn">
                            <mat-icon *ngIf="saveIcon" class="mr-1">{{saveIcon}}</mat-icon>
                            <span> {{ "save_and_next" | translate }}</span>
                        </button>
                        <button mat-flat-button (click)="nextTab()" style="background-color: green; color: #FFFFFF"
                            type="button" color="primary" class="px-3 mr-2 toggle-sidebar-folded nextBtn">
                            {{ "next" | translate }}
                            <mat-icon *ngIf="nextIcon" class="mr-1">{{nextIcon}}</mat-icon>
                        </button>
                    </div>
                </mat-card>
            </div>
            <!-- Bottom Button -->
        </form>
    </div>
</div>
