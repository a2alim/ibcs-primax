<div *ngIf="spinner || spinner1 || spinner2" class="flex items-center justify-center">
    <div style="border-top-color:transparent; position: absolute;z-index: 9999;"
        class="absolute top-1/2 left-1/2 w-16 h-16 border-4 border-blue-400 border-dashed rounded-full animate-spin">
    </div>
</div>

<h1 class="p-2" style="color: red;" *ngIf="!canSave"><strong>{{'ResearcherProposalReq' | translate}}</strong></h1>

<div>

    <form #f="ngForm">

        <div class="flex justify-end mb-2">
            <div class="addMoreBtn" mat-raised-button color="primary" (click)="addNewRow()">
                {{'AddMore' | translate}}
            </div>
        </div>

        <ng-container *ngFor="let rsc of researcherProposalRscWorkingInOrganizations; let i = index;">
            <ng-container *ngIf="rsc.isDeleted !== 1">

                <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                    <mat-label class="heading" fxFlex="100%" fxFlex.xs="100%" fxFlex.sm="100%" fxFlex.md="100%">
                        {{'RscWorkingInOrg' | translate}}
                        <span (click)="deleteNewRelativeForm(rsc,i)">
                            <mat-icon class="exp-icon">delete</mat-icon>
                        </span>
                    </mat-label>
                </div>

                <mat-card>

                    <br />
                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                                    fxFlex.xs="100%">{{'ResearcherName' | translate}}
                                </mat-label>

                                <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%"
                                    fxFlex.sm="60%" fxFlex.xs="100%">
                                    <mat-select #stExpenditureItemId="ngModel" [(ngModel)]="rsc.researcherName"
                                        [ngModelOptions]="{standalone: true}"
                                        (ngModelChange)="onChangeResearcherName($event,i)">
                                        <mat-option *ngFor="let i of researcherList" [value]="i.researcherName">
                                            {{i.researcherName}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                            </div>
                        </div>
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                                    fxFlex.xs="100%">{{'Designation' | translate}}
                                    <!-- <strong class="required">*</strong> -->
                                </mat-label>
                                <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%"
                                    fxFlex.sm="60%" fxFlex.xs="100%">
                                    <input matInput [(ngModel)]="rsc.designation" [ngModelOptions]="{standalone: true}"
                                        disabled>
                                    <!-- <mat-error>{{'DesignationReq' | translate}}</mat-error> -->
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                                    fxFlex.xs="100%">{{'Age' | translate}}
                                    <!-- <strong class="required">*</strong> -->
                                </mat-label>
                                <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%"
                                    fxFlex.sm="60%" fxFlex.xs="100%">
                                    <input matInput placeholder="Max 3 number" [(ngModel)]="rsc.age" maxlength="3"
                                        [ngModelOptions]="{standalone: true}" disabled>
                                    <!-- <mat-error>{{'MobileNoReq' | translate}}</mat-error> -->
                                </mat-form-field>
                            </div>
                        </div>
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                                    fxFlex.xs="100%">{{'Occupation' | translate}}
                                </mat-label>
                                <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%"
                                    fxFlex.sm="60%" fxFlex.xs="100%">
                                    <input matInput [(ngModel)]="rsc.occupation" [ngModelOptions]="{standalone: true}"
                                        disabled>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                                    fxFlex.xs="100%">{{'MobileNo' | translate}}
                                    <!-- <strong class="required">*</strong> -->
                                </mat-label>
                                <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%"
                                    fxFlex.sm="60%" fxFlex.xs="100%">
                                    <input matInput [(ngModel)]="rsc.mobileNo" [ngModelOptions]="{standalone: true}"
                                        disabled>
                                    <!-- <mat-error>{{'MobileNoReq' | translate}}</mat-error> -->
                                </mat-form-field>
                            </div>
                        </div>
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                                    fxFlex.xs="100%">{{'EmailAddress' | translate}}
                                    <!-- <strong class="required">*</strong> -->
                                </mat-label>
                                <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%"
                                    fxFlex.sm="60%" fxFlex.xs="100%">
                                    <input matInput [(ngModel)]="rsc.emailAddress" [ngModelOptions]="{standalone: true}"
                                        #email="ngModel" pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}"
                                        type="email" disabled>
                                    <mat-hint
                                        *ngIf="(email.touched || f.submitted || formSubmit|| email.dirty)&& email.invalid"
                                        style="color: crimson !important;">Email is invalid!</mat-hint>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>

                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                                    fxFlex.xs="100%">{{'NidNo' | translate}}
                                </mat-label>
                                <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%"
                                    fxFlex.sm="60%" fxFlex.xs="100%">
                                    <input matInput [(ngModel)]="rsc.nidNo" [ngModelOptions]="{standalone: true}"
                                        disabled>
                                </mat-form-field>
                            </div>
                        </div>
                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                                    fxFlex.xs="100%">{{'TelephoneNo' | translate}}
                                </mat-label>
                                <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%"
                                    fxFlex.sm="60%" fxFlex.xs="100%">
                                    <input matInput [(ngModel)]="rsc.telephoneNo" [ngModelOptions]="{standalone: true}"
                                        disabled>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>


                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">

                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                                <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                                    fxFlex.xs="100%">{{'EducationQualification' | translate}}
                                </mat-label>
                                <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%"
                                    fxFlex.sm="60%" fxFlex.xs="100%">
                                    <input matInput [(ngModel)]="rsc.educationQualification"
                                        [ngModelOptions]="{standalone: true}" disabled>
                                </mat-form-field>
                            </div>
                        </div>

                        <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                            <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">

                                <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                                    fxFlex.xs="100%">{{'researcherType' | translate}}</mat-label>

                                <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%"
                                    fxFlex.sm="60%" fxFlex.xs="100%">
                                    <mat-select [(ngModel)]="rsc.researcherTypeName"
                                        [ngModelOptions]="{standalone: true}"
                                        (ngModelChange)="onChangeResearcherTypeName($event,i)">
                                        <mat-option value="Team Lead">{{'Team Leader'}}</mat-option>
                                        <mat-option value="Co-researcher/Research Associate">{{'Co-researcher/Research Associate'}}</mat-option>
                                    </mat-select>
                                </mat-form-field>

                            </div>
                        </div>

                    </div>

                    <!-- <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxFlex="100%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%"
                            *ngIf="i === (this.researcherProposalRscWorkingInOrganizations.length - 1)">                            
                        </div>
                    </div> -->


                </mat-card>
            </ng-container>
            <br />
        </ng-container>

        <div class="flex justify-end mt-3 mr-2">

            <button mat-flat-button [color]="'primary'" (click)="previousTab()" type="submit"
                class="px-3 mr-2 toggle-sidebar-folded previousBtn">
                <mat-icon *ngIf="previousIcon" class="mr-1">{{previousIcon}}</mat-icon>
                {{ "Previous" | translate }}
            </button>

            <button mat-flat-button style="background-color: green; color: #FFFFFF" type="submit"
                (click)="onSubmit(false)" [disabled]="!canSave" color="primary"
                class="px-3 mr-2 toggle-sidebar-folded saveBtn">
                <mat-icon *ngIf="saveIcon" class="mr-1">{{saveIcon}}</mat-icon>
                <span>{{ "Save" | translate }} </span>
            </button>

            <button mat-flat-button (click)="onSubmit(true)" [disabled]="!canSave" type="button" color="primary"
                class="px-3 mr-2 toggle-sidebar-folded saveAndNextBtn">
                <mat-icon *ngIf="saveIcon" class="mr-1">{{saveIcon}}</mat-icon>
                <span> {{ "SaveAndNext" | translate }}</span>
            </button>

            <button mat-flat-button (click)="nextTab()" style="background-color: green; color: #FFFFFF" type="button"
                color="primary" class="px-3 mr-2 toggle-sidebar-folded nextBtn">
                {{ "Next" | translate }}
                <mat-icon *ngIf="nextIcon" class="mr-1">{{nextIcon}}</mat-icon>
            </button>
            
        </div>
    </form>

</div>

<!-- Main End -->