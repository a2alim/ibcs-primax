<div class="width-100">
    <!-- Header -->
    <app-form-header [title]="'headerTitle' | translate"></app-form-header>

    <div *ngIf="spinner" class="flex items-center justify-center">
        <div style="border-top-color:transparent; position: absolute;z-index: 9999;"
            class="absolute top-1/2 left-1/2 w-16 h-16 border-4 border-blue-400 border-dashed rounded-full animate-spin">
        </div>
    </div>

    <!-- Main Start -->
    <div class="flex-auto m-7 body-color">

        <div class="max-w-8xl">
            <div class="overflow-y-auto">
                <mat-card>
                    <form #f="ngForm">
                        <div class="m-5" fxLayout="row wrap" fxLayoutAlign="space-between center">

                            <ng-container *ngIf="!viewFlag">

                                <mat-label fxFlex="15%" fxFlex.md="25%" fxFlex.sm="40%" fxFlex.xs="100%">
                                    {{'Subject' | translate}} :
                                    <strong class="required">*</strong>
                                </mat-label>

                                <ng-container *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='Evaluator'">

                                    <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="85%" fxFlex.md="75%"
                                        fxFlex.sm="60%" fxFlex.xs="100%">
                                        <input #subject="ngModel" matInput required
                                            [(ngModel)]="linkupProposalWithEvaluatorsObj.subject"
                                            [ngModelOptions]="{standalone: true}" requerd>

                                        <mat-hint
                                            *ngIf="(subject.touched || f.submitted || (subject.dirty && !(subject.value | required))) && subject.errors?.required"
                                            style="color: crimson !important;">
                                            {{'SubjectReq' | translate}}
                                        </mat-hint>

                                    </mat-form-field>
                                </ng-container>

                                <ng-container *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='EvaluatorForProMarks'">

                                    <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="85%" fxFlex.md="75%"
                                        fxFlex.sm="60%" fxFlex.xs="100%">
                                        <input #subjectForProMarks="ngModel" matInput required
                                            [(ngModel)]="linkupProposalWithEvaluatorsObj.subjectForProMarks"
                                            [ngModelOptions]="{standalone: true}" requerd>
                                        <mat-hint
                                            *ngIf="(subjectForProMarks.touched || f.submitted || (subjectForProMarks.dirty && !(subjectForProMarks.value | required))) && subjectForProMarks.errors?.required"
                                            style="color: crimson !important;">
                                            {{'SubjectReq' | translate}}
                                        </mat-hint>

                                    </mat-form-field>
                                </ng-container>


                                <ng-container *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='EvaluatorForResearch'">

                                    <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="85%" fxFlex.md="75%"
                                        fxFlex.sm="60%" fxFlex.xs="100%">
                                        <input #subjectForProMarks="ngModel" matInput required
                                            [(ngModel)]="linkupProposalWithEvaluatorsObj.subjectForResearch"
                                            [ngModelOptions]="{standalone: true}" requerd>
                                        <mat-hint
                                            *ngIf="(subjectForProMarks.touched || f.submitted || (subjectForProMarks.dirty && !(subjectForProMarks.value | required))) && subjectForProMarks.errors?.required"
                                            style="color: crimson !important;">
                                            {{'SubjectReq' | translate}}
                                        </mat-hint>

                                    </mat-form-field>
                                </ng-container>

                            </ng-container>

                            <ng-container *ngIf="viewFlag">
                                <mat-label fxFlex="15%" fxFlex.md="25%" fxFlex.sm="40%" fxFlex.xs="100%">
                                    {{'Subject' | translate}} :
                                </mat-label>

                                <ng-container *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='Evaluator'">
                                    <div class="fuse-mat-dense flex-auto" fxFlex="85%" fxFlex.md="75%" fxFlex.sm="60%"
                                        fxFlex.xs="100%">
                                        <input matInput required [(ngModel)]="linkupProposalWithEvaluatorsObj.subject"
                                            [ngModelOptions]="{standalone: true}" requerd readonly>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='EvaluatorForProMarks'">
                                    <div class="fuse-mat-dense flex-auto" fxFlex="85%" fxFlex.md="75%" fxFlex.sm="60%"
                                        fxFlex.xs="100%">
                                        <input matInput required
                                            [(ngModel)]="linkupProposalWithEvaluatorsObj.subjectForProMarks"
                                            [ngModelOptions]="{standalone: true}" requerd readonly>
                                    </div>
                                </ng-container>


                                <ng-container *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='EvaluatorForResearch'">
                                    <div class="fuse-mat-dense flex-auto" fxFlex="85%" fxFlex.md="75%" fxFlex.sm="60%"
                                        fxFlex.xs="100%">
                                        <input matInput required
                                            [(ngModel)]="linkupProposalWithEvaluatorsObj.subjectForResearch"
                                            [ngModelOptions]="{standalone: true}" requerd readonly>
                                    </div>
                                </ng-container>

                            </ng-container>
                        </div>

                        <div class="m-5" fxLayout="row wrap" fxLayoutAlign="space-between center">

                            <ng-container *ngIf="!viewFlag">

                                <mat-label fxFlex="15%" fxFlex.md="25%" fxFlex.sm="40%" fxFlex.xs="100%">
                                    {{'BodyContent' | translate}} :
                                    <strong class="required">*</strong>
                                </mat-label>


                                <div fxFlex="85%" fxFlex.md="75%" fxFlex.sm="60%" fxFlex.xs="100%">

                                    <div class="custom-file-upload-div">
                                        <label for="file-upload" class="custom-file-upload">
                                            <mat-icon class="custom-image-icon">image</mat-icon>
                                        </label>
                                        <input #file type="file" accept='image/*'
                                            (change)="uploadImageAsBase64(file.files,'objectivesEn')"
                                            id="file-upload" />
                                    </div>

                                    <ng-container *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='Evaluator'">
                                        <ckeditor #mailBodyContent="ngModel"
                                            [(ngModel)]="linkupProposalWithEvaluatorsObj.mailBodyContent"
                                            [ngModelOptions]="{standalone: true}" [config]="mediumEditorConfig" requerd>
                                        </ckeditor>
                                        <mat-hint
                                            *ngIf="(mailBodyContent.touched || f.submitted || (mailBodyContent.dirty && !(mailBodyContent.value | required))) && mailBodyContent.errors?.required"
                                            style="color: crimson !important;">
                                            {{'BodyReq' | translate}}
                                        </mat-hint>
                                    </ng-container>

                                    <ng-container
                                        *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='EvaluatorForProMarks'">
                                        <ckeditor #mailBodyContentForProMarks="ngModel"
                                            [(ngModel)]="linkupProposalWithEvaluatorsObj.mailBodyContentForProMarks"
                                            [ngModelOptions]="{standalone: true}" [config]="mediumEditorConfig" requerd>
                                        </ckeditor>
                                        <mat-hint
                                            *ngIf="(mailBodyContentForProMarks.touched || f.submitted || (mailBodyContentForProMarks.dirty && !(mailBodyContentForProMarks.value | required))) && mailBodyContentForProMarks.errors?.required"
                                            style="color: crimson !important;">
                                            {{'BodyReq' | translate}}
                                        </mat-hint>
                                    </ng-container>


                                    <ng-container
                                        *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='EvaluatorForResearch'">
                                        <ckeditor #mailBodyContentForProMarks="ngModel"
                                            [(ngModel)]="linkupProposalWithEvaluatorsObj.mailBodyContentForResearch"
                                            [ngModelOptions]="{standalone: true}"  [config]="mediumEditorConfig" requerd>
                                        </ckeditor>
                                        <mat-hint
                                            *ngIf="(mailBodyContentForProMarks.touched || f.submitted || (mailBodyContentForProMarks.dirty && !(mailBodyContentForProMarks.value | required))) && mailBodyContentForProMarks.errors?.required"
                                            style="color: crimson !important;">
                                            {{'BodyReq' | translate}}
                                        </mat-hint>
                                    </ng-container>
                                </div>

                            </ng-container>

                            <ng-container *ngIf="viewFlag">

                                <mat-label fxFlex="15%" fxFlex.md="25%" fxFlex.sm="40%" fxFlex.xs="100%">
                                    {{'BodyContent' | translate}} :
                                </mat-label>


                                <div fxFlex="85%" fxFlex.md="75%" fxFlex.sm="60%" fxFlex.xs="100%">
                                    <div class="fuse-mat-dense flex-auto" fxFlex="85%" fxFlex.md="75%" fxFlex.sm="60%"
                                        fxFlex.xs="100%">
                                        <ng-container *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='Evaluator'">
                                            <p [innerHTML]="linkupProposalWithEvaluatorsObj.mailBodyContent"></p>
                                        </ng-container>

                                        <ng-container
                                            *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='EvaluatorForProMarks'">
                                            <p [innerHTML]="linkupProposalWithEvaluatorsObj.mailBodyContentForProMarks">
                                            </p>
                                        </ng-container>

                                        <ng-container
                                            *ngIf="linkupProposalWithEvaluatorsObj.emailFor=='EvaluatorForResearch'">
                                            <p [innerHTML]="linkupProposalWithEvaluatorsObj.mailBodyContentForResearch">
                                            </p>
                                        </ng-container>

                                    </div>
                                </div>

                            </ng-container>
                        </div>



                        <div class="flex justify-end mt-3 mr-2">
                            <!-- [disabled]="(linkupProposalWithEvaluatorsObj.mailStatus==1 && linkupProposalWithEvaluatorsObj.emailFor =='Evaluator') || (linkupProposalWithEvaluatorsObj.mailStatusForProMarks==1 && linkupProposalWithEvaluatorsObj.emailFor=='EvaluatorForProMarks')" -->
                            <button mat-flat-button type="button" color="primary"
                                class="px-3 mr-2 toggle-sidebar-folded saveAndNextBtn" (click)="onSubmit(true)"

                                *ngIf="!viewFlag">
                                <span> {{ "Send" | translate }}</span>
                                <mat-icon class="ml-2" *ngIf="sendIcon">{{sendIcon}}</mat-icon>
                            </button>

                            <button mat-flat-button type="button"
                                style="background-color: #f37a7a !important; color: #eee2e2"
                                class="px-3 mr-2 toggle-sidebar-folded saveAndNextBtn" (click)="onClose(true)">
                                <mat-icon class="mr-1" *ngIf="closeIcon">{{closeIcon}}</mat-icon>
                                <span> {{ "close" | translate }}</span>
                            </button>
                        </div>
                    </form>
                </mat-card>
            </div>
        </div>

    </div>
    <!-- Main End -->
</div>
