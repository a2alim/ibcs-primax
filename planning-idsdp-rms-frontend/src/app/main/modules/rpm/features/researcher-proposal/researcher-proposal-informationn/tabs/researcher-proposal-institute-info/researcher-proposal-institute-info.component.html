<!--Loder-->
<div *ngIf="spinner" class="flex items-center justify-center">
    <div style="border-top-color:transparent; position: absolute;z-index: 9999;"
        class="absolute top-1/2 left-1/2 w-16 h-16 border-4 border-blue-400 border-dashed rounded-full animate-spin">
    </div>
</div>

<h1 class="p-2" style="color: red;" *ngIf="!canSave"><strong>{{'ResearcherProposalReq' | translate}}</strong></h1>

<div style="width: 100%;" fxLayout="row wrap" fxLayoutAlign="space-between center">
    <mat-label class="heading w-full">
        {{'InstituteInformation' | translate}}
    </mat-label>
</div>

<mat-card>
    <form #f="ngForm">
        <div fxLayout="row wrap" fxLayoutAlign="space-between center">
            <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">

                    <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%" fxFlex.xs="100%">
                        {{'InstituteName' | translate}}
                        <strong class="required">*</strong>
                    </mat-label>

                    <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%" fxFlex.sm="60%"
                        fxFlex.xs="100%">

                        <input #instituteName="ngModel" matInput required
                            [(ngModel)]="institutionInformation.instituteName" [ngModelOptions]="{standalone: true}">

                        <mat-hint
                            *ngIf="(instituteName.touched || f.submitted || (instituteName.dirty && !(instituteName.value | required))) && instituteName.errors?.required"
                            style="color: crimson !important;">
                            {{'InstituteNameReq' | translate}}
                        </mat-hint>

                    </mat-form-field>
                </div>
            </div>
            <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                    <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%" fxFlex.xs="100%">
                        {{'YearOfEstablishment' | translate}}
                        <strong class="required">*</strong>
                    </mat-label>
                    <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%" fxFlex.sm="60%"
                        fxFlex.xs="100%">

                        <mat-select #yearOfEstablishment="ngModel"
                            [(ngModel)]="institutionInformation.yearOfEstablishment"
                            [ngModelOptions]="{standalone: true}" required>
                            <mat-option *ngFor="let y of years" [value]="y">{{y}}</mat-option>
                        </mat-select>

                        <mat-hint
                            *ngIf="(yearOfEstablishment.touched || f.submitted) && yearOfEstablishment.errors?.required"
                            style="color: crimson !important;">
                            {{'YearOfEstablishmentReq' | translate}}
                        </mat-hint>

                    </mat-form-field>
                </div>
            </div>
        </div>

        <div fxLayout="row wrap" fxLayoutAlign="space-between center">

            <mat-label style="margin-top: -15px" fxFlex="19%" fxFlex.md="40%" fxFlex.sm="40%" fxFlex.xs="100%">
                {{'AddressDetails' | translate}}
                <strong class="required">*</strong>
            </mat-label>

            <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="80%" fxFlex.md="60%" fxFlex.sm="60%"
                fxFlex.xs="100%">
                <input #addressDetails="ngModel" matInput required [(ngModel)]="institutionInformation.addressDetails"
                    [ngModelOptions]="{standalone: true}">

                <mat-hint
                    *ngIf="(addressDetails.touched || f.submitted || (addressDetails.dirty && !(addressDetails.value | required))) && addressDetails.errors?.required"
                    style="color: crimson !important;">
                    {{'AddressDetailsReq' | translate}}
                </mat-hint>

            </mat-form-field>

            <div fxFlex="1%"></div>
        </div>

        <div fxLayout="row wrap" fxLayoutAlign="space-between center">
            <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">

                <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">

                    <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%" fxFlex.xs="100%">
                        {{'TelephoneNo' | translate}}
                        <strong class="required">*</strong>
                    </mat-label>

                    <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%" fxFlex.sm="60%"
                        fxFlex.xs="100%">

                        <input #telephoneNo="ngModel" matInput required [(ngModel)]="institutionInformation.telephoneNo"
                            [ngModelOptions]="{standalone: true}">
                        <!-- <mat-error>{{'TelephoneNoReq' | translate}}</mat-error> -->

                        <mat-hint
                            *ngIf="(telephoneNo.touched || f.submitted || (telephoneNo.dirty && !(telephoneNo.value | required))) && telephoneNo.errors?.required"
                            style="color: crimson !important;">
                            {{'TelephoneNoReq' | translate}}
                        </mat-hint>

                    </mat-form-field>

                </div>

            </div>
            <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">

                    <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%" fxFlex.xs="100%">
                        {{'EmailAddress' | translate}}
                        <strong class="required">*</strong>
                    </mat-label>

                    <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%" fxFlex.sm="60%"
                        fxFlex.xs="100%">
                        <input #emailAddress="ngModel" matInput required
                            [(ngModel)]="institutionInformation.emailAddress" [ngModelOptions]="{standalone: true}">

                        <!-- <mat-error>{{'EmailAddressReq' | translate}}</mat-error> -->

                        <mat-hint
                            *ngIf="(emailAddress.touched || f.submitted || (emailAddress.dirty && !(emailAddress.value | email))) && emailAddress.errors?.required"
                            style="color: crimson !important;">
                            {{'EmailAddressReq' | translate}}
                        </mat-hint>

                    </mat-form-field>
                </div>
            </div>
        </div>

        <div fxLayout="row wrap" fxLayoutAlign="space-between center">
            <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                    <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%" fxFlex.xs="100%">
                        {{'RegistrationNo' | translate}}
                        <!-- <strong class="required">*</strong> -->
                    </mat-label>
                    <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%" fxFlex.sm="60%"
                        fxFlex.xs="100%">
                        <input matInput [(ngModel)]="institutionInformation.registrationNo"
                            [ngModelOptions]="{standalone: true}">
                        <!-- <mat-error>{{'RegistrationNoReq' | translate}}</mat-error> -->
                    </mat-form-field>
                </div>
            </div>

            <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                    <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%" fxFlex.xs="100%">
                        {{'TinNo' | translate}}
                        <!-- <strong class="required">*</strong> -->
                    </mat-label>
                    <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%" fxFlex.sm="60%"
                        fxFlex.xs="100%">
                        <input matInput [(ngModel)]="institutionInformation.tinNo"
                            [ngModelOptions]="{standalone: true}">
                        <!-- <mat-error>{{'TinNoReq' | translate}}</mat-error> -->
                    </mat-form-field>
                </div>
            </div>
        </div>

        <div fxLayout="row wrap" fxLayoutAlign="space-between center">
            <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                <div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                    <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%" fxFlex.xs="100%">
                        {{'TaxTokenImgOfCurrentYear' | translate}}
                        <!-- <strong class="required">*</strong> -->
                    </mat-label>
                    <!-- <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%" fxFlex.sm="60%"
                                    fxFlex.xs="100%">
                        <input matInput required [(ngModel)]="institutionInformation.taxTokenImgOfCurrentYear"
                               [ngModelOptions]="{standalone: true}">
                        <mat-error>{{'TaxTokenImgOfCurrentYear' | translate}}</mat-error>
                    </mat-form-field> -->


                    <mat-form-field class="fuse-mat-dense flex-auto" fxFlex="60%" fxFlex.md="60%" fxFlex.sm="60%"
                        fxFlex.xs="100%">
                        {{institutionInformation?.fileName}}
                        <ngx-mat-file-input [accept]="'.pdf'" (change)="uploadFile($event.target.files)" required>
                        </ngx-mat-file-input>
                        <mat-icon matSuffix>folder</mat-icon>
                    </mat-form-field>

                </div>
            </div>

            <div fxFlex="50%" fxFlex.md="100%" fxFlex.sm="100%" fxFlex.xs="100%">
                <!--<div class="pr-4" fxLayout="row wrap" fxLayoutAlign="space-between center">
                    <mat-label style="margin-top: -15px" fxFlex="40%" fxFlex.md="40%" fxFlex.sm="40%"
                               fxFlex.xs="100%">
                        {{'IsEditable' | translate}}
                    </mat-label>
                    <mat-radio-group [(ngModel)]="institutionInformation.isEditable"
                                     [ngModelOptions]="{standalone: true}" required fxFlex="50%" fxFlex.md="70%"
                                     fxFlex.sm="70%" fxFlex.xs="100%">
                        <mat-radio-button [value]='1'>Yes</mat-radio-button>&nbsp;&nbsp;
                        <mat-radio-button [value]='0'>No</mat-radio-button>
                    </mat-radio-group>
                </div>-->
            </div>
        </div>

        <div class="flex justify-end mt-3 mr-2">

            <button mat-flat-button [color]="'primary'" (click)="previousTab()" type="submit"
                class="px-3 mr-2 toggle-sidebar-folded previousBtn">
                <mat-icon *ngIf="previousIcon" class="mr-1">{{previousIcon}}</mat-icon>
                {{ "Previous" | translate }}
            </button>

            <button mat-flat-button style="background-color: green; color: #FFFFFF" type="submit"
                (click)="onSubmit(false)" [disabled]="!canSave" color="primary"
                class="px-3 mr-2 toggle-sidebar-folded saveBtn">
                <mat-icon *ngIf="saveIcon" class="mr-1">{{saveIcon}}</mat-icon>
                <span>{{ "Save" | translate }}</span>
            </button>

            <button mat-flat-button (click)="onSubmit(true)" [disabled]="!canSave" type="button" color="primary"
                class="px-3 mr-2 toggle-sidebar-folded saveAndNextBtn">
                <mat-icon *ngIf="saveIcon" class="mr-1">{{saveIcon}}</mat-icon>
                <span> {{ "SaveAndNext" | translate }}</span>
            </button>

            <button mat-flat-button (click)="nextTab()" style="background-color: green; color: #FFFFFF" type="button"
                color="primary" class="px-3 mr-2 toggle-sidebar-folded nextBtn">
                {{ "Next" | translate }}
                <mat-icon *ngIf="nextIcon" class="mr-1">{{nextIcon}}</mat-icon>
            </button>
        </div>

    </form>

    <!--    </mat-card>-->


</mat-card>
<!-- Main End -->