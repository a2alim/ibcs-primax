<div class="width-100">
    <div *ngIf="spinner" class="flex items-center justify-center">
        <div style="border-top-color:transparent; position: absolute;z-index: 9999;"
             class="absolute top-1/2 left-1/2 w-16 h-16 border-4 border-blue-400 border-dashed rounded-full animate-spin"></div>
    </div>
    <div class="flex-auto m-7 body-color">
        <form #f="ngForm">
            <!-- CARD ONE-->
            <div>
                <div class="heading mt-2">
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-80 lg:w-80 ml-2 md:text-left pr-2">
                            {{'tab_1_title' | translate}}
                        </div>
                    </div>
                </div>
                <mat-card class="tab-color">
                    <!-- Row 1-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'fiscalYear' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <mat-select  #fiscalYearIds="ngModel" (selectionChange)="findResearcherNamesByFiscalYear($event.value)"
                                    required
                                    [(ngModel)]="fiscalYearId" [ngModelOptions]="{standalone: true}">
                                    <mat-option [value]="">Select</mat-option>
                                    <mat-option *ngFor="let f of fiscalYearList" [value]="f.id">{{f.fiscalYear}}
                                    </mat-option>
                                </mat-select>
                                <mat-hint
                                    *ngIf="(fiscalYearIds.touched || f.submitted) && fiscalYearIds.errors?.required"
                                    style="color: crimson !important;">
                                    Fiscal year is required!
                                </mat-hint>
                            </mat-form-field>
                        </div>
                        <div class="w-full sm:w-auto md:w-50 lg:w-50 ml-2 md:text-left pr-2 md:pt-3"></div>
                    </div>
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'research_title' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-80 lg:w-80">
                            <mat-form-field class="w-full">
                                <mat-select #researchTitle="ngModel" [(ngModel)]="agreementWithResearcherModel.infoId"
                                    [ngModelOptions]="{standalone: true}">
                                    <mat-option [value]="">Select</mat-option>
                                    <mat-option *ngFor="let f of researchTitleNames" [value]="f.id">{{f.researchTitle}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>Research title is required!</mat-error>
                                <mat-hint
                                    *ngIf="(researchTitle.touched || f.submitted) && researchTitle.errors?.required"
                                    style="color: crimson !important;">
                                    Research title is required!
                                </mat-hint>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Row 2-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'total_grant_amount' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input #totalGrantAmount="ngModel" matInput [(ngModel)]="agreementWithResearcherModel.totalGrantAmount"
                                    [ngModelOptions]="{standalone: true}">
                                <mat-hint
                                    *ngIf="(totalGrantAmount.touched || f.submitted) && totalGrantAmount.errors?.required"
                                    style="color: crimson !important;">
                                    Required
                                </mat-hint>
                            </mat-form-field>
                        </div>
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'installment_no' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input matInput #installmentNo="ngModel" [(ngModel)]="agreementWithResearcherModel.installmentNo"
                                    [ngModelOptions]="{standalone: true}">
                                <mat-hint
                                    *ngIf="(installmentNo.touched || f.submitted) && installmentNo.errors?.required"
                                    style="color: crimson !important;">
                                    Required
                                </mat-hint>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Row 2-->
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'research_start_date' | translate}}
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input  (dateChange)="dateValidity()" matInput [matDatepicker]="datepicker1"
                                    [(ngModel)]="agreementWithResearcherModel.researchStartDate"
                                    [ngModelOptions]="{standalone: true}" required>
                                <mat-datepicker-toggle matSuffix [for]="datepicker1"></mat-datepicker-toggle>
                                <mat-datepicker #datepicker1>
                                </mat-datepicker>
                                <mat-error>required.</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'research_end_date' | translate}}
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full" >
                                <input #datepicker22 (dateChange)="dateValidity()"  matInput [matDatepicker]="datepicker2"
                                    [(ngModel)]="agreementWithResearcherModel.researchEndDate"
                                    [ngModelOptions]="{standalone: true}" required>
                                <mat-datepicker-toggle matSuffix [for]="datepicker2"></mat-datepicker-toggle>
                                <mat-datepicker #datepicker2>
                                </mat-datepicker>
                                <mat-error>Research end date must be grater than of research start date</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'research_duration' | translate}}
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-20 lg:w-20">
                            <mat-form-field class="w-full" (click)="ageCalculator()" maxlength="1">
                                <input disabled="true" matInput [(ngModel)]="agreementWithResearcherModel.researchDuration"
                                    [ngModelOptions]="{standalone: true}">
                                <mat-error>required!</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="w-full sm:w-auto md:w-10 md:mt-3 md:ml-2 lg:w-10">
                            <div class="w-full" >
                                ({{'Month' | translate}})
                                <!-- <span *ngIf="agreementWithResearcherModel.researchDuration!='NaN'">                                   
                                    {{agreementWithResearcherModel.researchDuration==='1'? 'Year':'Years'}}
                                </span> -->
                            </div>
                        </div>
                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'recipient_user_id' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <mat-select [(ngModel)]=" agreementWithResearcherModel.recipientUserId"
                                    [ngModelOptions]="{standalone: true}">
                                    <mat-option *ngFor="let f of userRmsList" [value]="f.id">{{f.name}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>Fiscal year is required!</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="flex justify-end mt-8">
                        <button mat-flat-button style="background-color: green; color: #FFFFFF" type="submit"
                            (click)="save(false)" color="primary" class="px-3 mr-2 toggle-sidebar-folded saveBtn">
                            <mat-icon *ngIf="saveIcon" class="mr-1">{{saveIcon}}</mat-icon>
                            <span>{{ "save" | translate }}</span>
                        </button>
                        <button mat-flat-button (click)="saveAndNext(true)" type="button" color="primary"
                            class="px-3 mr-2 toggle-sidebar-folded saveAndNextBtn">
                            <mat-icon *ngIf="saveIcon" class="mr-1">{{saveIcon}}</mat-icon>
                            <span> {{ "save_and_next" | translate }}</span>
                        </button>
                        <button mat-flat-button (click)="nextTab()" style="background-color: green; color: #FFFFFF"
                            type="button" color="primary" class="px-3 mr-2 toggle-sidebar-folded nextBtn">
                            {{ "next" | translate }}
                            <mat-icon *ngIf="nextIcon" class="mr-1">{{nextIcon}}</mat-icon>
                        </button>
                    </div>
                </mat-card>
            </div>
            <!-- Bottom Button -->
        </form>
    </div>
</div>
