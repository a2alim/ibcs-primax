<div class="width-100">
    <div class="flex-auto m-7 body-color">

        <div *ngIf="spinner" class="flex items-center justify-center">
            <div class="absolute z-40 top-40 animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"></div>
        </div>

        <form #f="ngForm">
            <!-- CARD ONE-->
            <div>
                <div class="heading mt-2">
                    <div class="md:flex">
                        <div class="w-full sm:w-auto md:w-80 lg:w-80 ml-2 md:text-left pr-2">
                            {{'tab_3_title' | translate}}
                        </div>
                    </div>
                </div>
                <mat-card class="tab-color">
                    <!-- Row 1-->
                    <div class="md:flex">

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'guarantor_name' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input matInput [(ngModel)]="agreementJamanatnamaFormModel.guarantorName"
                                    [ngModelOptions]="{standalone: true}" required #guarantorName="ngModel">

                                <mat-hint
                                    *ngIf="(guarantorName.touched || f.submitted) && guarantorName.errors?.required"
                                    style="color: crimson !important;">
                                    {{'required' | translate}}
                                </mat-hint>
                            </mat-form-field>
                        </div>

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'email_address' | translate}}
                            </span>
                        </div>
                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input matInput [(ngModel)]="agreementJamanatnamaFormModel.emailAddress"
                                    [ngModelOptions]="{standalone: true}" #email="ngModel"
                                    pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}" type="email">
                                <mat-hint *ngIf="(email.touched || f.submitted || email.dirty)&& email.invalid"
                                    style="color: crimson !important;">E-mail is invalid!
                                </mat-hint>
                                <mat-error>E-mail not valid!</mat-error>
                            </mat-form-field>
                        </div>
                    </div>

                    <!--mother name row-->
                    <div class="md:flex">

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'fathers_name' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input matInput [(ngModel)]="agreementJamanatnamaFormModel.fathersName"
                                    [ngModelOptions]="{standalone: true}" required #fathersName="ngModel">
                                <mat-hint *ngIf="(fathersName.touched || f.submitted) && fathersName.errors?.required"
                                    style="color: crimson !important;">
                                    {{'required' | translate}}
                                </mat-hint>
                            </mat-form-field>
                        </div>

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'mother_name' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input matInput [(ngModel)]="agreementJamanatnamaFormModel.motherName"
                                    [ngModelOptions]="{standalone: true}" required #motherName="ngModel">
                                <mat-hint *ngIf="(motherName.touched || f.submitted) && motherName.errors?.required"
                                    style="color: crimson !important;">
                                    {{'required' | translate}}
                                </mat-hint>
                            </mat-form-field>
                        </div>

                    </div>


                    <!-- Row 2-->
                    <div class="md:flex">

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'present_address' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <textarea matInput [(ngModel)]="agreementJamanatnamaFormModel.presentAddress"
                                    [ngModelOptions]="{standalone: true}" required #presentAddress="ngModel"></textarea>
                                <mat-hint
                                    *ngIf="(presentAddress.touched || f.submitted) && presentAddress.errors?.required"
                                    style="color: crimson !important;">
                                    {{'required' | translate}}
                                </mat-hint>
                            </mat-form-field>
                        </div>

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'permanent_address' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <textarea matInput [(ngModel)]="agreementJamanatnamaFormModel.permanentAddress"
                                    [ngModelOptions]="{standalone: true}" required
                                    #permanentAddress="ngModel"></textarea>
                                <mat-hint
                                    *ngIf="(permanentAddress.touched || f.submitted) && permanentAddress.errors?.required"
                                    style="color: crimson !important;">
                                    {{'required' | translate}}
                                </mat-hint>
                            </mat-form-field>
                        </div>

                    </div>

                    <!-- Row 2-->
                    <div class="md:flex">

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'RefundPeriod' | translate}}
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input matInput [(ngModel)]="agreementJamanatnamaFormModel.refundPeriod"
                                    [ngModelOptions]="{standalone: true}" #refundPeriod="ngModel" type="number" required>
                                <mat-hint *ngIf="(refundPeriod.touched || f.submitted) && refundPeriod.errors?.required"
                                    style="color: crimson !important;">
                                    {{'required' | translate}}
                                </mat-hint>
                            </mat-form-field>
                        </div>

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'nid_number' | translate}}
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input #nid_number="ngModel" [(ngModel)]="agreementJamanatnamaFormModel.nidNumber"
                                    [ngModelOptions]="{standalone: true}" matInput type="number">
                                <mat-hint *ngIf="nid_number.dirty && !(nid_number.value | nid_number)"
                                    style="color: crimson !important;">
                                    Invalid number. Please provide a valid 10 digit or 17 digit number.
                                </mat-hint>
                            </mat-form-field>
                        </div>

                    </div>

                    <div class="md:flex">

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'mobile_number' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input matInput [(ngModel)]="agreementJamanatnamaFormModel.mobileNumber"
                                    [ngModelOptions]="{standalone: true}" #mobile="ngModel" required>

                                <mat-hint *ngIf="mobile.dirty && !(mobile.value | phoneMobileNo)"
                                    style="color: crimson !important;">
                                    Invalid number. Please provide a valid 11 digit number.
                                </mat-hint>

                                <mat-hint *ngIf="(mobile.touched || f.submitted) && mobile.errors?.required"
                                    style="color: crimson !important;">
                                    {{'required' | translate}}
                                </mat-hint>
                            </mat-form-field>
                        </div>

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'tin_no' | translate}}
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full">
                                <input matInput [(ngModel)]="agreementJamanatnamaFormModel.tinNo"
                                    [ngModelOptions]="{standalone: true}" type="number">
                            </mat-form-field>
                        </div>

                    </div>

                    <div class="md:flex">

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'upload_image' | translate}}<strong class="required">*</strong>
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full" (change)="handleFileInput($event.target.files,0)">
                                {{ profileImageName === null ? '' : profileImageName | slice:profileImageName.length -
                                15:profileImageName.length }}
                                <ngx-mat-file-input [accept]="'.*'" required>
                                </ngx-mat-file-input>
                                <mat-icon matSuffix>folder</mat-icon>
                                <mat-error>File is required!</mat-error>
                            </mat-form-field>
                        </div>

                        <div class="w-full sm:w-auto md:w-20 lg:w-20 ml-2 md:text-left pr-2 md:pt-3">
                            <span class="text-gray-700">
                                {{'upload_signature_file' | translate}}
                            </span>
                        </div>

                        <div class="w-full sm:w-auto md:w-30 lg:w-30">
                            <mat-form-field class="w-full" (change)="handleFileInput($event.target.files,1)">
                                {{ signatureImageName === null ? '' : signatureImageName |
                                slice:signatureImageName.length - 15:signatureImageName.length }}
                                <ngx-mat-file-input [accept]="'.*'">
                                </ngx-mat-file-input>
                                <mat-icon matSuffix>folder</mat-icon>
                                <mat-error>File is required!</mat-error>
                            </mat-form-field>
                        </div>

                    </div>


                    <div class="flex justify-end mt-8">
                        <button mat-flat-button [color]="'primary'" (click)="previousTab()" type="submit"
                            class="px-3 mr-2 toggle-sidebar-folded previousBtn">
                            <mat-icon *ngIf="previousIcon" class="mr-1">{{previousIcon}}</mat-icon>
                            {{ "previous" | translate }}
                        </button>

                        <button [disabled]="!(mobile.value | phoneMobileNo) || spinner" mat-flat-button style="background-color: green; color: #FFFFFF" type="submit"
                            (click)="save()" color="primary" class="px-3 mr-2 toggle-sidebar-folded saveBtn">
                            <mat-icon *ngIf="saveIcon" class="mr-1">{{saveIcon}}</mat-icon>
                            <span>{{ "save" | translate }}</span>
                        </button>

                        <button [disabled]="!(mobile.value | phoneMobileNo) || spinner" mat-flat-button (click)="saveAndNext()" type="button" color="primary"
                            class="px-3 mr-2 toggle-sidebar-folded saveAndNextBtn">
                            <mat-icon *ngIf="saveIcon" class="mr-1">{{saveIcon}}</mat-icon>
                            <span> {{ "save_and_next" | translate }}</span>
                        </button>

                        <button mat-flat-button (click)="nextTab()" style="background-color: green; color: #FFFFFF"
                            type="button" color="primary" class="px-3 mr-2 toggle-sidebar-folded nextBtn">
                            {{ "next" | translate }}
                            <mat-icon *ngIf="nextIcon" class="mr-1">{{nextIcon}}</mat-icon>
                        </button>
                    </div>
                </mat-card>
            </div>
            <!-- Bottom Button -->

        </form>
    </div>
</div>
